(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"01be":function(e,i,t){"use strict";t.r(i);var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("q-page",{staticClass:"flex flex-center"},[t("q-card",{staticClass:"text-center",attrs:{flat:""}},[t("div",{staticClass:"text-title text-center"},[e._v("\n      Pay a lightning network invoice with Hive or HBD\n    ")]),t("div",{staticClass:"q-pa-md",staticStyle:{"max-width":"90%"}},[t("q-input",{staticClass:"text-center",attrs:{label:"Lightning network invoice",filled:"",autogrow:""},on:{enter:function(i){return e.checkInvoice()},change:function(i){return e.checkInvoice()}},model:{value:e.invoice,callback:function(i){e.invoice=i},expression:"invoice"}})],1),e.invoiceValid&&e.decodedInvoice?t("q-card",{staticClass:"shadow-1 q-pa-sm"},[e._v("\n      Valid invoice for "),t("b",[e._v(e._s(e.decodedInvoice.satoshis))]),e._v(" satoshis ("),t("b",[e._v("$"+e._s(e.costUsd))]),e._v(" USD)"),t("br"),t("q-btn",{attrs:{"no-caps":"",lossy:""},on:{click:function(i){return e.sendKeychain(e.costHive,"HIVE")}}},[e._v(e._s(e.costHive)+" HIVE "),t("q-icon",{staticClass:"q-ml-sm",attrs:{name:"img:hive.svg",title:"Hive",size:"md"}})],1),t("q-btn",{attrs:{"no-caps":"",glossy:""},on:{click:function(i){return e.sendKeychain(e.costHbd,"HBD")}}},[e._v(e._s(e.costHbd)+" HBD "),t("q-icon",{staticClass:"q-ml-sm",attrs:{name:"img:hbd.svg",title:"Hive Dollars",size:"md"}})],1)],1):e._e()],1),e.prices?t("q-footer",{staticClass:"text-center"},[t("b",[e._v("Bitcoin:")]),e._v(" $"+e._s(e.tidyNumber(e.prices.bitcoin.usd))+"\n    "),t("b",[e._v("Hive:")]),e._v(" $"+e._s(e.prices.hive.usd)+"\n    "),t("b",[e._v("Hive Dollars:")]),e._v(" $"+e._s(e.prices.hive_dollar.usd)+"\n  ")]):e._e()],1)},n=[],c=(t("32ec"),t("cbcf"),t("14af")),o=t.n(c),a=t("f057"),r={name:"PageIndex",data(){return{invoice:"",decodedInvoice:null,prices:null,overChargeSats:5e-7,overChargeMultiplier:1.15}},computed:{invoiceValid:function(){return!!this.invoice.startsWith("lnbc")},costHive:function(){if(this.prices&&this.decodedInvoice){const e=this.prices.hive.btc,i=1e-8*this.decodedInvoice.satoshis,t=(i+this.overChargeSats)/e*this.overChargeMultiplier;return t.toFixed(3)}return null},costHbd:function(){if(this.prices&&this.decodedInvoice){const e=this.prices.hive_dollar.btc,i=1e-8*this.decodedInvoice.satoshis,t=(i+this.overChargeSats)/e*this.overChargeMultiplier;return t.toFixed(3)}return null},costUsd:function(){if(this.prices&&this.decodedInvoice){const e=1e-8*this.decodedInvoice.satoshis;return(e*this.prices.bitcoin.usd).toFixed(2)}return null}},methods:{getPrices(){this.prices=null,this.$axios.get("https://api.coingecko.com/api/v3/simple/price?ids=hive%2Chive_dollar,bitcoin&vs_currencies=btc,usd&include_market_cap=false&include_24hr_vol=false&include_24hr_change=false&include_last_updated_at=false").then((e=>{this.prices=e.data})).catch((()=>{console.log("Failed to load data from coingecko api")}))},checkInvoice(){this.invoiceValid?(console.info(o.a.decode(this.invoice)),this.decodedInvoice=o.a.decode(this.invoice)):this.decodedInvoice=null},tidyNumber(e){if(e){const i=e.toString().split(".");return i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i.join(".")}return null},async sendKeychain(e,i){const t="hivehydra",s="",{success:n,msg:c,cancel:o,notInstalled:r,notActive:l}=await Object(a["keychain"])(window,"requestTransfer",s,t,e,this.invoice,i);n&&this.$q.notify("Payment sent!"),o&&this.$q.notify("Cancelled by user"),o||(l?this.$q.notify("Please allow keychain to access this website"):r?this.$q.notify("Keychain not available"):console.info(c))}},mounted(){this.getPrices()}},l=r,d=t("a6c2"),h=t("505d"),v=t("5ce7"),u=t("a3be"),f=t("ef9c"),p=t("19dc"),_=t("d09b"),b=t("63c1"),g=t.n(b),m=Object(d["a"])(l,s,n,!1,null,null,null);i["default"]=m.exports;g()(m,"components",{QPage:h["a"],QCard:v["a"],QInput:u["a"],QBtn:f["a"],QIcon:p["a"],QFooter:_["a"]})},1:function(e,i){},2:function(e,i){},3:function(e,i){},4:function(e,i){},5:function(e,i){},6:function(e,i){}}]);